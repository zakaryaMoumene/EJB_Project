<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:include src="/navigationBar.xhtml" />

<h:head>
	<link href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"/>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
</h:head>

<h:body>

<h:outputStylesheet library="css" name="style.css" />
	<div class="body2"></div>
      <div id="container">
         <h1>Formulaire d'Ã©dition du profile</h1>
		<h:form id="editform">
			<p:growl id="msgs" showDetail="true" />
			<h:panelGrid columns="5" >
							<p:inputText id="modelInput" value="#{cvController.person.firstName}"
								><p:ajax event="keyup"/></p:inputText>
								
							<p:inputText value="#{cvController.person.lastName}" style="width:100%" ><p:ajax event="keyup"/></p:inputText>
								
							<p:inputText value="#{cvController.person.website}" style="width:100%" ><p:ajax event="keyup"/></p:inputText>
							<p:inputText value="#{cvController.person.mail}" style="width:100%" label="Year" ><p:ajax event="keyup"/></p:inputText>
							<p:calendar id="event" value="#{cvController.person.birthday}">
            <p:ajax event="dateSelect" listener="#{cvController.onCellEdit}" update="editform:msgs" />
        </p:calendar>
			</h:panelGrid>
			<p:dataTable id="actDataTable" var="act"
				value="#{cvController.activities_t}" editable="true"
				editMode="cell" widgetVar="cellAct">
				<p:ajax event="cellEdit" listener="#{cvController.onCellEdit}"
					update="editform:msgs" />
				
							<h:inputHidden value="#{act.id}" 
								style="width:96%" />
								
				<p:column headerText="Title">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{act.title}" class="dis"/>
						</f:facet>
						<f:facet name="input">
							<p:inputText id="modelInput"  value="#{act.title}"
								style="width:96%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="Descriptive Text">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputLabel value="#{act.descriptiveText}" class="dis" />
						</f:facet>
						<f:facet name="input">
							<p:inputTextarea value="#{act.descriptiveText}" rows="6"
								cols="33" style="width:96%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="Website">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{act.website}" class="dis"/>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{act.website}" style="width:96%" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="Year">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{act.year}" class="dis"/>
						</f:facet>
						<f:facet name="input">
							<p:inputText value="#{act.year}" type="number" min="1950" max="2018" step="1" style="width:96%" label="Year" />
						</f:facet>
					</p:cellEditor>
				</p:column>
				<p:column headerText="Nature">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{act.nature}" class="dis"/>
						</f:facet>
						<f:facet name="input">
							<h:selectOneMenu value="#{act.nature}" style="width:100%">
								<f:selectItems value="#{cvController.natures}" var="nat"
									itemLabel="#{nat}" itemValue="#{nat}" />
							</h:selectOneMenu>
						</f:facet>
					</p:cellEditor>
					</p:column>
				<p:column style="width:5%;">
					<p:commandLink action="#{cvController.deleteActivity(act)}" process="actDataTable" update=":editform:actDataTable" ><i class="material-icons" style="font-size:32px;color:red">cancel</i></p:commandLink>
				</p:column>
			</p:dataTable>
			<p:contextMenu for="actDataTable" widgetVar="cMenu">
				<p:menuitem value="Edit Cell" icon="ui-icon-search"
					onclick="PF('cellAct').showCellEditor();return false;" />
				<p:menuitem value="Hide Menu" icon="ui-icon-close"
					onclick="PF('cMenu').hide()" />
			</p:contextMenu>

			<p:commandLink actionListener="#{cvController.addActivity}"
				 process="actDataTable" update="editform:actDataTable" ><i class="fa fa-plus-square" style="font-size:32px;color:black"></i></p:commandLink>
<br/> <br/><br/>
			<p:commandButton action="#{cvController.updateCv}" value="CONFIRMER" style="float:right;width:30%;margin-right:35%;"
				ajax="true" validateClient="true" process="@this" update="editform:actDataTable"/>
		<br/> 
		</h:form>
		</div>
</h:body>
</html>